---
layout : post
title : IOT 8ì¼ì°¨ TIL
description : ë¶€ê²½ëŒ€í•™êµ ìœˆë„ìš° í”Œë«í¼ê¸°ë°˜ IOT ì‹œìŠ¤í…œ ê°œë°œì ê³¼ì • TIL
summary : ê°œë°œí™˜ê²½ êµ¬ì¶•
tags : [TIL, DE]
---
  
-------------
   
   
### ğŸ““ ê³µë¶€í•œ ë‚´ìš© [blog](https://canyougivemeonelastkiss.tistory.com/26)
  
  urllibë¥¼ ì´ìš©í•œ ì›¹ í¬ë¡¤ë§ [git](https://github.com/drown-ed/IOT-study/blob/main/python-basic/230208/web_crawling.ipynb)  
    
  OpenAPIë¥¼ ì´ìš©í•œ ì›¹ í¬ë¡¤ë§ [git](https://github.com/drown-ed/IOT-study/blob/main/python-basic/230208/openapi_crawling.ipynb)  
    ã„´ data.go.kr ì—ì„œ ë¶€ì‚°ê´‘ì—­ì‹œ ë²„ìŠ¤ì •ë³´ì•ˆë‚´ê¸° í˜„í™© APIë¥¼ ì‚¬ìš©í—ˆê°€ ë°›ì•„ì„œ ì‚¬ìš©.  
    ã„´ ì‚¬ì´íŠ¸ ë‚´ì—ì„œ ë¯¸ë¦¬ë³´ê¸°ê°€ ê°€ëŠ¥í•œ ì¤„ì€ ì²˜ìŒ ì•Œì•˜ë‹¤.  
  
  Beautiful Soupë¥¼ ì´ìš©í•œ ì›¹ í¬ë¡¤ë§ [git](https://github.com/drown-ed/IOT-study/blob/main/python-basic/230208/beautifulsoup.ipynb)  
    

### ğŸ’¦ ì–´ë ¤ì› ë˜ ë‚´ìš© 

  OpenAPI ì‚¬ìš© ì‹œ ssl ì¸ì¦ì„œ ê´€ë ¨ ì˜¤ë¥˜ë¥¼ ë±‰ìœ¼ë©° ì‹¤í–‰ë˜ì§€ ì•Šì•˜ë‹¤. ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ê²€ìƒ‰í•´ì„œ ì—¬ëŸ¬ ìˆ˜ì •ì„ ê°€í•œ ê²°ê³¼ Colabì—ì„œëŠ” ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ì´ ë˜ì—ˆëŠ”ë° ì»´í“¨í„° í™˜ê²½ì—ì„œëŠ” ì‹¤í–‰ë˜ì§€ ì•Šì•˜ë‹¤. íŒŒì´ì¬ ë²„ì „ì´ ì„œë¡œ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë¼ëŠ” ê°€ì„¤ì„ ì„¸ì›Œë´¤ê³ , íŒŒì´ì¬ ë²„ì „ì„ ë‚®ì¶”ëŠ” ê²ƒìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ ì‹œí—˜í•´ë³´ëŠ” ê²Œ ì¢‹ì„ ê²ƒ ê°™ë‹¤. ê²°êµ­ request.get í•¨ìˆ˜ì—ì„œ verify = False íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•´ ê²€ì¦ì„ êº¼ì„œ ì‹¤í–‰ì‹œì¼°ë‹¤.  
  
  ```
  response = requests.get(total_url, verify = False)
  ```
  
### ğŸ§· ê¶ê¸ˆí•œ ë‚´ìš©  ë¶€ì¡±í•œ ë‚´ìš© 
  
  ë¸”ë¡œê·¸ì—ë„ ê¸°ì¬í•´ë†“ì€ ê²ƒì²˜ëŸ¼ ë²„ìŠ¤ì •ë³´ì•ˆë‚´ê¸° í˜„í™© APIì—ì„œ ë½‘ì•„ë‚¸ ì •ë³´ë¥¼ foliumì„ ì—°ë™ì‹œì¼°ì„ ë•Œ ê±°ë¦¬ê°€ ê°€ì¥ ë¨¼ ë‘ ì§€ì ì˜ ì°¨ì´ë¥¼ ì¡ì•„ zoom_start íŒŒë¼ë¯¸í„°ë¥¼ ìœ ë™ì ìœ¼ë¡œ ì…ë ¥í•  ìˆ˜ ìˆê²Œ í•œë‹¤ë©´ ì‚¬ìš©ì ì…ì¥ì—ì„œ ë³´ê¸° í¸í•  ê²ƒ ê°™ë‹¤. í•œ ë²ˆ êµ¬í˜„í•´ë³´ë©´ ì¢‹ê² ë‹¤.  
  
  ê·¸ë¦¬ê³  ì–´ë µì§€ ì•Šê²Œ êµ¬í˜„ ì™„ë£Œ~ ğŸ‘ŠğŸ‘ŠğŸ‘Š
```
try:
result = getDataPortalSearch(input(), 'json')

json_data = json.loads(result)                                   # íŒŒì¼ì´ ì•„ë‹ˆë¯€ë¡œ loads
station_data = json_data['getTblBusinfoeqStusInfo']['body']['items']['item']

import folium

lat = []
lng = []

for item in station_data:
    lat.append(float(item['lat']))
    lng.append(float(item['lng']))

scale = max(max(lat) - min(lat), max(lng) - min(lng))
value = 18

if scale >= 1 and scale <=1.5:
    value = 9
elif scale >= 0.6 and scale <= 0.9:
    value = 10
elif scale >= 0.5 and scale <= 0.1:
    value = 11
else: value = 12

print(value)

lat = 0
lng = 0

for item in station_data:
    lat += float(item['lat'])
    lng += float(item['lng'])

m = folium.Map(location = [lat / len(station_data), lng / len(station_data)], zoom_start = value)

for item in station_data:
    stop_str = '<h4>' + item['stationLoc'] + '</h4> (' + item['stationNum'] + ') ' + item['addr']
    iframe = folium.IFrame(stop_str)
    popup = folium.Popup(iframe, min_width = 200, max_width = 200)
    folium.Marker(location = [item['lat'], item['lng']],
                popup = popup).add_to(m)

except Exception as e:
    print('No data')
```

### ğŸ’¬ ëŠë‚€ì  

  ì›¹ í¬ë¡¤ë§ì€ í™•ì‹¤íˆ ê²°ê³¼ë¥¼ ê³„ì† ë„ì¶œë˜ë‹ˆê¹Œ ì•„ì£¼ ì¡°ê¸ˆ, ì•„ì£¼ ì¡°ê¸ˆ ë” ì¬ë°ŒëŠ” ê²ƒ ê°™ë‹¤. (ì•„ì£¼ ì¡°ê¸ˆâ€¦â€¦.)
